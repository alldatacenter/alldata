(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f33bb1f"],{"0482":function(e,t,a){},"06e7":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),c={class:"hive-tables-wrap"},o={key:0,class:"tables-content"},r={class:"g-flex-jsb table-top"},i=["title"],s={class:"right-btn"},l={class:"content"};function u(e,t,a,u,d,b){var p=Object(n["resolveComponent"])("a-button"),f=Object(n["resolveComponent"])("u-details"),g=Object(n["resolveComponent"])("a-tab-pane"),m=Object(n["resolveComponent"])("a-tabs"),v=Object(n["resolveComponent"])("u-loading"),j=Object(n["resolveComponent"])("router-view"),O=Object(n["resolveComponent"])("error-msg");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[e.isSecondaryNav?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("span",{title:e.tableName,class:"table-name g-text-nowrap"},Object(n["toDisplayString"])(e.tableName),9,i),Object(n["createElementVNode"])("div",s,[Object(n["createVNode"])(p,{type:"primary",disabled:e.status===e.upgradeStatus.upgrading,onClick:e.upgradeTable},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.displayStatus),1)]})),_:1},8,["disabled","onClick"]),e.status===e.upgradeStatus.failed?(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",{key:0,onClick:t[0]||(t[0]=function(t){return e.showErrorMsg=!0}),class:"fail-msg"},Object(n["toDisplayString"])(e.$t("lastUpgradingFailed")),1)):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("div",l,[Object(n["createVNode"])(m,{activeKey:e.activeKey,"onUpdate:activeKey":t[1]||(t[1]=function(t){return e.activeKey=t})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(g,{key:"Details",tab:"Details"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{partitionColumnList:e.partitionColumnList,schema:e.schema},null,8,["partitionColumnList","schema"])]})),_:1})]})),_:1},8,["activeKey"])])])),e.loading?(Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:1})):Object(n["createCommentVNode"])("",!0),e.isSecondaryNav?(Object(n["openBlock"])(),Object(n["createBlock"])(j,{key:2,onGoBack:e.goBack,onRefresh:e.refresh},null,8,["onGoBack","onRefresh"])):Object(n["createCommentVNode"])("",!0),e.showErrorMsg?(Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:3,msg:e.errorMessage,onCancle:t[2]||(t[2]=function(t){return e.showErrorMsg=!1})},null,8,["msg"])):Object(n["createCommentVNode"])("",!0)])}var d=a("1da1"),b=a("5530"),p=(a("96cf"),a("ac1f"),a("5319"),a("47e2")),f={class:"hive-table-detail g-flex"},g={class:"left-content"},m={key:0,class:"table-attrs"},v={class:"attr-title"},j={class:"table-attrs"},O={class:"attr-title"},k=Object(n["defineComponent"])({props:{schema:null,partitionColumnList:null},setup:function(e){var t=e,a=Object(p["b"])(),c=a.t,o=Object(n["shallowReactive"])([{title:c("field"),dataIndex:"field",width:"30%"},{title:c("type"),dataIndex:"type",width:"30%"},{title:c("description"),dataIndex:"comment",ellipsis:!0}]),r=Object(n["shallowReactive"])([{title:c("field"),dataIndex:"field",width:"30%"},{title:c("type"),dataIndex:"type",width:"30%"},{title:c("description"),dataIndex:"comment",ellipsis:!0}]);return function(e,a){var c=Object(n["resolveComponent"])("a-table");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",f,[Object(n["createElementVNode"])("div",g,[t.partitionColumnList&&t.partitionColumnList.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",m,[Object(n["createElementVNode"])("p",v,Object(n["toDisplayString"])(e.$t("partitionKey")),1),Object(n["createVNode"])(c,{rowKey:"field",columns:Object(n["unref"])(r),"data-source":t.partitionColumnList,pagination:!1},null,8,["columns","data-source"])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("p",O,Object(n["toDisplayString"])(e.$t("schema")),1),Object(n["createVNode"])(c,{rowKey:"field",columns:Object(n["unref"])(o),"data-source":t.schema,pagination:!1},null,8,["columns","data-source"])])])])}}}),h=(a("73715"),a("6b0d")),y=a.n(h);const C=y()(k,[["__scopeId","data-v-31e13dc2"]]);var w=C,N={class:"msg"},S=Object(n["defineComponent"])({props:{msg:null},emits:["cancle"],setup:function(e,t){var a=t.emit,c=e;return function(e,t){var o=Object(n["resolveComponent"])("a-modal");return Object(n["openBlock"])(),Object(n["createBlock"])(o,{visible:!0,width:560,title:"".concat(e.$t("errorMessage")),footer:null,onCancel:t[0]||(t[0]=function(e){return a("cancle")}),class:"upgrade-error"},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("p",N,Object(n["toDisplayString"])(c.msg),1)]})),_:1},8,["title"])}}});a("e900");const x=y()(S,[["__scopeId","data-v-a5995806"]]);var B=x,E=a("6c02"),V=a("f38b"),I=a("5738"),R=Object(n["defineComponent"])({name:"Tables",components:{UDetails:w,errorMsg:B},setup:function(){var e=V["c"],t=Object(n["ref"])(),a=Object(E["e"])(),c=Object(E["d"])(),o=Object(p["b"])(),r=o.t,i=Object(n["computed"])((function(){return!!(c.path.indexOf("upgrade")>-1)})),s=Object(n["reactive"])({loading:!1,showErrorMsg:!1,activeKey:"Details",status:"",displayStatus:"",errorMessage:"",tableName:"tableName",partitionColumnList:[],schema:[]}),l=function(){a.back()},u=Object(n["computed"])((function(){return Object(b["a"])({},c.query)})),f=function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var n,o,i,l,d,p,m,v,j=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=j.length>0&&void 0!==j[0]&&j[0],e.prev=1,t.value&&clearTimeout(t.value),o=u.value,i=o.catalog,l=o.db,d=o.table,i&&l&&d){e.next=6;break}return e.abrupt("return");case 6:return!n&&(s.loading=!0),e.next=9,Object(I["m"])(Object(b["a"])({},u.value));case 9:p=e.sent,m=p.status,v=p.errorMessage,s.status=m,s.displayStatus=m===V["c"].upgrading?r("upgrading"):r("upgrade"),s.errorMessage=v||"",m===V["c"].upgrading?t.value=setTimeout((function(){f(!0)}),1500):m===V["c"].none?g():m===V["c"].success?a.replace({path:"/tables",query:Object(b["a"])({},c.query)}):m===V["c"].failed&&g();case 15:return e.prev=15,!n&&(s.loading=!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,,15,18]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,a,n,c,o,r,i,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=u.value,a=t.catalog,n=t.db,c=t.table,a&&n&&c){e.next=4;break}return e.abrupt("return");case 4:return s.loading=!0,e.next=7,Object(I["d"])(Object(b["a"])({},u.value));case 7:o=e.sent,r=o.partitionColumnList,i=void 0===r?[]:r,l=o.schema,d=o.tableIdentifier,s.tableName=(null===d||void 0===d?void 0:d.tableName)||"",s.partitionColumnList=i||[],s.schema=l||[],e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](0);case 16:return e.prev=16,s.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,14,16,19]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){a.push({path:"/hive-tables/upgrade",query:Object(b["a"])({},c.query)})},j=function(){m()};return Object(n["watch"])((function(){return c.query}),(function(e,t){var a=e.catalog,n=e.db,o=e.table;"/hive-tables"!==c.path||a===t.catalog&&n===t.db&&o===t.table||m()})),Object(n["onBeforeUnmount"])((function(){clearTimeout(t.value)})),Object(n["onMounted"])((function(){m()})),Object(b["a"])(Object(b["a"])({},Object(n["toRefs"])(s)),{},{isSecondaryNav:i,upgradeStatus:e,upgradeTable:v,goBack:l,refresh:j})}});a("c289");const z=y()(R,[["render",u],["__scopeId","data-v-acbd8ea4"]]);t["default"]=z},5738:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"j",(function(){return r})),a.d(t,"i",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"m",(function(){return l})),a.d(t,"h",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"k",(function(){return b})),a.d(t,"c",(function(){return p})),a.d(t,"e",(function(){return f})),a.d(t,"f",(function(){return g})),a.d(t,"n",(function(){return m})),a.d(t,"l",(function(){return v}));a("99af");var n=a("b32d");function c(){return n["a"].get("ams/v1/catalogs")}function o(e){var t=e.catalog,a=e.keywords;return n["a"].get("ams/v1/catalogs/".concat(t,"/databases"),{params:{keywords:a}})}function r(e){var t=e.catalog,a=e.db,c=e.keywords;return n["a"].get("ams/v1/catalogs/".concat(t,"/databases/").concat(a,"/tables"),{params:{keywords:c}})}function i(e){var t=e.catalog,a=void 0===t?"":t,c=e.db,o=void 0===c?"":c,r=e.table,i=void 0===r?"":r,s=e.token,l=void 0===s?"":s;return n["a"].get("ams/v1/tables/catalogs/".concat(a,"/dbs/").concat(o,"/tables/").concat(i,"/details"),{params:{token:l}})}function s(e){var t=e.catalog,a=void 0===t?"":t,c=e.db,o=void 0===c?"":c,r=e.table,i=void 0===r?"":r;return n["a"].get("ams/v1/tables/catalogs/".concat(a,"/dbs/").concat(o,"/tables/").concat(i,"/hive/details"))}function l(e){var t=e.catalog,a=void 0===t?"":t,c=e.db,o=void 0===c?"":c,r=e.table,i=void 0===r?"":r;return n["a"].get("ams/v1/tables/catalogs/".concat(a,"/dbs/").concat(o,"/tables/").concat(i,"/upgrade/status"))}function u(e){var t=e.catalog,a=e.db,c=e.table,o=e.page,r=e.pageSize,i=e.token;return n["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(a,"/tables/").concat(c,"/partitions"),{params:{page:o,pageSize:r,token:i}})}function d(e){var t=e.catalog,a=e.db,c=e.table,o=e.partition,r=e.page,i=e.pageSize,s=e.token;return n["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(a,"/tables/").concat(c,"/partitions/").concat(o,"/files"),{params:{page:r,pageSize:i,token:s}})}function b(e){var t=e.catalog,a=e.db,c=e.table,o=e.page,r=e.pageSize,i=e.token;return n["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(a,"/tables/").concat(c,"/transactions"),{params:{page:o,pageSize:r,token:i}})}function p(e){var t=e.catalog,a=e.db,c=e.table,o=e.transactionId,r=e.page,i=e.pageSize,s=e.token;return n["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(a,"/tables/").concat(c,"/transactions/").concat(o,"/detail"),{params:{page:r,pageSize:i,token:s}})}function f(e){var t=e.catalog,a=e.db,c=e.table,o=e.page,r=e.pageSize,i=e.token;return n["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(a,"/tables/").concat(c,"/operations"),{params:{page:o,pageSize:r,token:i}})}function g(e){var t=e.catalog,a=e.db,c=e.table,o=e.page,r=e.pageSize,i=e.token;return n["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(a,"/tables/").concat(c,"/optimize"),{params:{page:o,pageSize:r,token:i}})}function m(e){var t=e.catalog,a=void 0===t?"":t,c=e.db,o=void 0===c?"":c,r=e.table,i=void 0===r?"":r,s=e.properties,l=void 0===s?{}:s,u=e.pkList,d=void 0===u?[]:u;return n["a"].post("ams/v1/tables/catalogs/".concat(a,"/dbs/").concat(o,"/tables/").concat(i,"/upgrade"),{properties:l,pkList:d})}function v(){return n["a"].get("ams/v1/upgrade/properties")}},73715:function(e,t,a){"use strict";a("0482")},9017:function(e,t,a){},a65b:function(e,t,a){},c289:function(e,t,a){"use strict";a("a65b")},e900:function(e,t,a){"use strict";a("9017")},f38b:function(e,t,a){"use strict";var n,c,o;a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return o})),function(e){e["Created"]="#f5f5f5",e["Failed"]="#fff2f0",e["Finished"]="#f6ffed",e["Canceled"]="#f5f5f5"}(n||(n={})),function(e){e["failed"]="FAILED",e["upgrading"]="UPGRADING",e["success"]="SUCCESS",e["none"]="NONE"}(c||(c={})),function(e){e["ICEBERG"]="iceberg",e["ARCTIC"]="arctic",e["HIVE"]="hive"}(o||(o={}))}}]);