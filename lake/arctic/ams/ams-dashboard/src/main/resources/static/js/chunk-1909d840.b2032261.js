(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1909d840"],{"11e6":function(e,t,n){},4139:function(e,t,n){"use strict";n.r(t);var a=n("1da1"),c=n("5530"),r=(n("96cf"),n("d3b7"),n("159b"),n("7a23")),o=n("6c02"),i=n("2b46"),u=(n("d81d"),n("4de4"),n("47e2")),l={class:"field-wrap"},s=Object(r["defineComponent"])({props:{fields:null,loading:{type:Boolean}},setup:function(e,t){var n=t.expose,a=e,c=Object(u["b"])(),o=c.t,i=Object(r["shallowReactive"])([{dataIndex:"field",title:o("field"),ellipsis:!0},{dataIndex:"type",title:o("type"),ellipsis:!0},{dataIndex:"comment",title:o("description"),ellipsis:!0},{dataIndex:"primaryKey",title:o("primaryKey"),scopedSlots:{customRender:"primaryKey"}}]);return n({getPkname:function(){return a.fields.filter((function(e){return e.checked})).map((function(e){return{fieldName:e.field||""}}))}}),function(t,n){var c=Object(r["resolveComponent"])("a-checkbox"),o=Object(r["resolveComponent"])("a-table");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",l,[Object(r["createVNode"])(o,{loading:e.loading,class:"ant-table-common",columns:Object(r["unref"])(i),"data-source":a.fields,pagination:!1},{bodyCell:Object(r["withCtx"])((function(e){var t=e.column,n=e.record;return["primaryKey"===t.dataIndex?(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:0,checked:n.checked,"onUpdate:checked":function(e){return n.checked=e}},null,8,["checked","onUpdate:checked"])):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["loading","columns","data-source"])])}}}),d=(n("9ca6"),n("6b0d")),b=n.n(d);const p=b()(s,[["__scopeId","data-v-5b1564d8"]]);var f=p,v={class:"partition-field-wrap"},O=Object(r["defineComponent"])({props:{partitionFields:null,loading:{type:Boolean}},setup:function(e){var t=e,n=Object(u["b"])(),a=n.t,c=Object(r["shallowReactive"])([{dataIndex:"field",title:a("field"),ellipsis:!0},{dataIndex:"type",title:a("type"),ellipsis:!0},{dataIndex:"comment",title:a("description"),ellipsis:!0}]);return function(n,a){var o=Object(r["resolveComponent"])("a-table");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",v,[Object(r["createVNode"])(o,{loading:e.loading,class:"ant-table-common",columns:Object(r["unref"])(c),"data-source":t.partitionFields,pagination:!1},null,8,["loading","columns","data-source"])])}}});const j=O;var m=j,g=(n("b64b"),n("7db0"),n("a434"),n("a878")),h=n("5738"),k=n("d257"),y=n("8552"),P={class:"config-properties"},x={class:"config-header g-flex"},w={class:"td g-flex-ac"},C={class:"td g-flex-ac bd-left"},N=Object(r["createTextVNode"])("+"),V=Object(r["defineComponent"])({props:{propertiesObj:null},setup:function(e,t){var n=t.expose,c=e,o=Object(r["reactive"])([]),i=Object(r["ref"])(),u=Object(r["reactive"])([]),l=Object(r["ref"])(),s=Object(r["reactive"])({data:[]}),d=Object(r["reactive"])(Object(y["a"])());function b(){o.length=0,s.data.length=0,Object.keys(c.propertiesObj).forEach((function(e){s.data.push({key:e,value:c.propertiesObj[e],uuid:Object(k["g"])()})}))}function p(){return f.apply(this,arguments)}function f(){return f=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.length=0,i.value=[],e.next=4,Object(h["l"])();case 4:t=e.sent,Object.keys(t).forEach((function(e){var n={key:e,label:e,value:e,text:t[e]||""};u.push(n),i.value.push(n)}));case 6:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function v(e,t){return t.key.toUpperCase().indexOf(e.toUpperCase())>=0}function O(e,t,n){var a=t.key,c=u.find((function(e){return e.key===a})),r=s.data.find((function(e){return e.uuid===n.uuid}));r&&(r.value=c.text||"",r.key=c.key||"")}function j(e){var t=s.data.indexOf(e);-1!==t&&s.data.splice(t,1)}function m(){s.data.push({key:"",value:"",uuid:Object(k["g"])()})}return Object(r["watch"])((function(){return c.propertiesObj}),(function(){b()}),{immediate:!0,deep:!0}),n({getProperties:function(){return l.value.validateFields().then((function(){var e={};return s.data.forEach((function(t){e[t.key]=t.value})),Promise.resolve(e)})).catch((function(){return!1}))}}),Object(r["onMounted"])((function(){p()})),function(e,t){var n=Object(r["resolveComponent"])("a-auto-complete"),a=Object(r["resolveComponent"])("a-form-item"),c=Object(r["resolveComponent"])("a-input"),o=Object(r["resolveComponent"])("a-form"),u=Object(r["resolveComponent"])("a-button");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",P,[Object(r["createElementVNode"])("div",x,[Object(r["createElementVNode"])("div",w,Object(r["toDisplayString"])(e.$t("key")),1),Object(r["createElementVNode"])("div",C,Object(r["toDisplayString"])(e.$t("value")),1)]),Object(r["createVNode"])(o,{ref_key:"propertiesFormRef",ref:l,model:Object(r["unref"])(s),class:"g-mt-12"},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object(r["unref"])(s).data,(function(t,o){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"config-row",key:t.uuid},[Object(r["createVNode"])(a,{name:["data",o,"key"],rules:[{required:!0,message:"".concat(e.$t(Object(r["unref"])(d).selectPh))}],class:"g-mr-8"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(n,{value:t.key,"onUpdate:value":function(e){return t.key=e},options:i.value,onSelect:function(e,n){return O(e,n,t)},"filter-option":v,style:{width:"100%"},class:"g-mr-12"},{option:Object(r["withCtx"])((function(e){var t=e.key;return[Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(t),1)]})),_:2},1032,["value","onUpdate:value","options","onSelect"])]})),_:2},1032,["name","rules"]),Object(r["createVNode"])(a,{name:["data",o,"value"],rules:[{required:!0,message:"".concat(e.$t(Object(r["unref"])(d).inputPh))}]},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{value:t.value,"onUpdate:value":function(e){return t.value=e},maxlength:64,style:{width:"100%"}},null,8,["value","onUpdate:value"])]})),_:2},1032,["name","rules"]),Object(r["createVNode"])(Object(r["unref"])(g["a"]),{class:"icon-close",onClick:function(e){return j(t)}},null,8,["onClick"])])})),128))]})),_:1},8,["model"]),Object(r["createVNode"])(u,{class:"config-btn",onClick:m},{default:Object(r["withCtx"])((function(){return[N]})),_:1})])}}});n("bc77");const B=V;var E=B,S={class:"upgrade-table"},_={class:"nav-bar"},z={class:"title g-ml-8"},R={class:"content"},I={class:"table-attrs"},F={class:"footer-btn"},$=Object(r["defineComponent"])({emits:["goBack","refresh"],setup:function(e,t){var n=t.emit,u=Object(r["ref"])(!1),l=Object(r["reactive"])([]),s=Object(r["reactive"])([]),d=Object(r["reactive"])({}),b=Object(r["reactive"])([]),p=(Object(o["e"])(),Object(o["d"])()),v=Object(r["computed"])((function(){return Object(c["a"])({},p.query)})),O=Object(r["ref"])(),j=Object(r["ref"])();function g(){return k.apply(this,arguments)}function k(){return k=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,o,i,b,p,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=v.value,n=t.catalog,a=t.db,r=t.table,n&&a&&r){e.next=4;break}return e.abrupt("return");case 4:return u.value=!0,s.length=0,l.length=0,e.next=9,Object(h["d"])(Object(c["a"])({},v.value));case 9:o=e.sent,i=o.partitionColumnList,b=void 0===i?[]:i,p=o.schema,f=o.properties,(b||[]).forEach((function(e){s.push(e)})),(p||[]).forEach((function(e){l.push(e)})),Object.assign(d,f),e.next=18;break;case 16:e.prev=16,e.t0=e["catch"](0);case 18:return e.prev=18,u.value=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,16,18,21]])}))),k.apply(this,arguments)}function y(){P()}function P(){return x.apply(this,arguments)}function x(){return x=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:b.length=0,t=O.value.getPkname(),t.forEach((function(e){b.push(e)})),j.value.getProperties().then((function(e){e&&(Object.assign(d,e),w())}));case 4:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function w(){return C.apply(this,arguments)}function C(){return C=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=v.value,a=t.catalog,r=t.db,o=t.table,a&&r&&o){e.next=4;break}return e.abrupt("return");case 4:return u.value=!0,e.next=7,Object(h["n"])(Object(c["a"])(Object(c["a"])({},v.value),{},{pkList:b,properties:d}));case 7:N(),n("refresh"),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),N();case 14:return e.prev=14,u.value=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])}))),C.apply(this,arguments)}function N(){n("goBack")}function V(){N()}return Object(r["onMounted"])((function(){g()})),function(e,t){var n=Object(r["resolveComponent"])("a-form-item"),a=Object(r["resolveComponent"])("a-form"),c=Object(r["resolveComponent"])("a-button");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",S,[Object(r["createElementVNode"])("div",_,[Object(r["createVNode"])(Object(r["unref"])(i["a"]),{onClick:N}),Object(r["createElementVNode"])("span",z,Object(r["toDisplayString"])(e.$t("upgradeHiveTable")),1)]),Object(r["createElementVNode"])("div",R,[Object(r["createElementVNode"])("div",I,[Object(r["createVNode"])(a,{name:"fields",class:"label-120"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(n,{label:e.$t("field"),name:"field"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{loading:u.value,fields:Object(r["unref"])(l),ref_key:"schemaFieldRef",ref:O},null,8,["loading","fields"])]})),_:1},8,["label"]),Object(r["createVNode"])(n,{label:e.$t("partitonField"),name:"partitonField"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{loading:u.value,partitionFields:Object(r["unref"])(s)},null,8,["loading","partitionFields"])]})),_:1},8,["label"]),Object(r["createVNode"])(n,{label:e.$t("otherProperties"),name:"otherProperties"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(E,{propertiesObj:Object(r["unref"])(d),ref_key:"propertiesRef",ref:j},null,8,["propertiesObj"])]})),_:1},8,["label"])]})),_:1})]),Object(r["createElementVNode"])("div",F,[Object(r["createVNode"])(c,{type:"primary",onClick:y,loading:u.value,class:"btn g-mr-12"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("ok")),1)]})),_:1},8,["loading"]),Object(r["createVNode"])(c,{type:"ghost",onClick:V,class:"btn"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$t("cancel")),1)]})),_:1})])])])}}});n("4dbb");const D=b()($,[["__scopeId","data-v-5c84690d"]]);t["default"]=D},"4dbb":function(e,t,n){"use strict";n("cf8e")},5738:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"j",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"m",(function(){return l})),n.d(t,"h",(function(){return s})),n.d(t,"g",(function(){return d})),n.d(t,"k",(function(){return b})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return v})),n.d(t,"n",(function(){return O})),n.d(t,"l",(function(){return j}));n("99af");var a=n("b32d");function c(){return a["a"].get("ams/v1/catalogs")}function r(e){var t=e.catalog,n=e.keywords;return a["a"].get("ams/v1/catalogs/".concat(t,"/databases"),{params:{keywords:n}})}function o(e){var t=e.catalog,n=e.db,c=e.keywords;return a["a"].get("ams/v1/catalogs/".concat(t,"/databases/").concat(n,"/tables"),{params:{keywords:c}})}function i(e){var t=e.catalog,n=void 0===t?"":t,c=e.db,r=void 0===c?"":c,o=e.table,i=void 0===o?"":o,u=e.token,l=void 0===u?"":u;return a["a"].get("ams/v1/tables/catalogs/".concat(n,"/dbs/").concat(r,"/tables/").concat(i,"/details"),{params:{token:l}})}function u(e){var t=e.catalog,n=void 0===t?"":t,c=e.db,r=void 0===c?"":c,o=e.table,i=void 0===o?"":o;return a["a"].get("ams/v1/tables/catalogs/".concat(n,"/dbs/").concat(r,"/tables/").concat(i,"/hive/details"))}function l(e){var t=e.catalog,n=void 0===t?"":t,c=e.db,r=void 0===c?"":c,o=e.table,i=void 0===o?"":o;return a["a"].get("ams/v1/tables/catalogs/".concat(n,"/dbs/").concat(r,"/tables/").concat(i,"/upgrade/status"))}function s(e){var t=e.catalog,n=e.db,c=e.table,r=e.page,o=e.pageSize,i=e.token;return a["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(n,"/tables/").concat(c,"/partitions"),{params:{page:r,pageSize:o,token:i}})}function d(e){var t=e.catalog,n=e.db,c=e.table,r=e.partition,o=e.page,i=e.pageSize,u=e.token;return a["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(n,"/tables/").concat(c,"/partitions/").concat(r,"/files"),{params:{page:o,pageSize:i,token:u}})}function b(e){var t=e.catalog,n=e.db,c=e.table,r=e.page,o=e.pageSize,i=e.token;return a["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(n,"/tables/").concat(c,"/transactions"),{params:{page:r,pageSize:o,token:i}})}function p(e){var t=e.catalog,n=e.db,c=e.table,r=e.transactionId,o=e.page,i=e.pageSize,u=e.token;return a["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(n,"/tables/").concat(c,"/transactions/").concat(r,"/detail"),{params:{page:o,pageSize:i,token:u}})}function f(e){var t=e.catalog,n=e.db,c=e.table,r=e.page,o=e.pageSize,i=e.token;return a["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(n,"/tables/").concat(c,"/operations"),{params:{page:r,pageSize:o,token:i}})}function v(e){var t=e.catalog,n=e.db,c=e.table,r=e.page,o=e.pageSize,i=e.token;return a["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(n,"/tables/").concat(c,"/optimize"),{params:{page:r,pageSize:o,token:i}})}function O(e){var t=e.catalog,n=void 0===t?"":t,c=e.db,r=void 0===c?"":c,o=e.table,i=void 0===o?"":o,u=e.properties,l=void 0===u?{}:u,s=e.pkList,d=void 0===s?[]:s;return a["a"].post("ams/v1/tables/catalogs/".concat(n,"/dbs/").concat(r,"/tables/").concat(i,"/upgrade"),{properties:l,pkList:d})}function j(){return a["a"].get("ams/v1/upgrade/properties")}},"7db0":function(e,t,n){"use strict";var a=n("23e7"),c=n("b727").find,r=n("44d2"),o="find",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),a({target:"Array",proto:!0,forced:i},{find:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)},8552:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("7a23"),c=n("47e2");function r(){var e=Object(c["b"])(),t=e.t,n=Object(a["computed"])((function(){return t("catalog")})).value,r=Object(a["computed"])((function(){return t("databaseName")})).value,o=Object(a["computed"])((function(){return t("tableName")})).value,i=Object(a["computed"])((function(){return t("optimzerGroup")})).value,u=Object(a["computed"])((function(){return t("resourceGroup")})).value,l=Object(a["computed"])((function(){return t("parallelism")})).value,s=Object(a["computed"])((function(){return t("username")})).value,d=Object(a["computed"])((function(){return t("password")})).value,b=Object(a["computed"])((function(){return t("database",2)})).value,p=Object(a["computed"])((function(){return t("table",2)})).value;return{selectPh:t("selectPlaceholder"),inputPh:t("inputPlaceholder"),selectClPh:t("selectPlaceholder",{selectPh:n}),selectDBPh:t("selectPlaceholder",{selectPh:r}),inputDBPh:t("inputPlaceholder",{inputPh:r}),inputClPh:t("inputPlaceholder",{inputPh:n}),inputTNPh:t("inputPlaceholder",{inputPh:o}),selectOptGroupPh:t("inputPlaceholder",{inputPh:i}),resourceGroupPh:t("inputPlaceholder",{inputPh:u}),parallelismPh:t("inputPlaceholder",{inputPh:l}),usernamePh:t("inputPlaceholder",{inputPh:s}),passwordPh:t("inputPlaceholder",{inputPh:d}),filterDBPh:t("filterPlaceholder",{inputPh:b}),filterTablePh:t("filterPlaceholder",{inputPh:p})}}},"9ca6":function(e,t,n){"use strict";n("ebb5")},bc77:function(e,t,n){"use strict";n("11e6")},cf8e:function(e,t,n){},ebb5:function(e,t,n){}}]);